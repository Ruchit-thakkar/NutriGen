import{c as v,r as d,j as e,d as u,n as b,M as O,U as W,X as E,b as P,u as q,e as B,I as K,f as S}from"./index-Dy18oCuP.js";import{L as N}from"./loader-circle-Cu9lCjUl.js";import{A as C,T as A}from"./target-DE7afFV1.js";import{aj as D,ak as U,al as R,am as $,an as M,ao as T,ap as F,T as H,aq as X,ar as G,C as Y,as as J}from"./BarChart-DVXeONBN.js";import{C as V}from"./circle-check-CMAOYCH9.js";const Q=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Z=v("calendar",Q);const ee=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],I=v("chart-line",ee);const se=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],te=v("pen-line",se);const ae=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],z=v("search",ae);const re=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ie=v("shield",re);const le=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],k=v("users",le),de=()=>{const[n,l]=d.useState(!0),[t,i]=d.useState(null),[x,c]=d.useState(0);if(d.useEffect(()=>{(async()=>{try{const[g,j]=await Promise.all([u.get("/api/admin/overview"),u.get("/api/admin/users")]);if(g.data.success&&j.data.success){i(g.data);const w=j.data.users.filter(a=>a.active===!0);c(w.length)}}catch(g){b.error("Failed to load admin data"),console.error(g)}finally{l(!1)}})()},[]),n||!t)return e.jsx("div",{className:"h-[60vh] flex flex-col items-center justify-center animate-in fade-in duration-500",children:e.jsxs("div",{className:"bg-white/60 backdrop-blur-xl p-8 rounded-[2rem] border border-white shadow-sm flex flex-col items-center",children:[e.jsx(N,{className:"animate-spin text-indigo-500 mb-4",size:40}),e.jsx("p",{className:"text-slate-500 font-bold tracking-widest uppercase text-sm",children:"Loading System Data"})]})});const{stats:r,graphs:m}=t;return e.jsxs("div",{className:"space-y-8 mt-4 md:mt-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-12",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"System Overview"}),e.jsx("p",{className:"text-slate-500 font-medium mt-1 text-lg",children:"High-level snapshot of platform growth and engagement."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx(L,{title:"Total Users",value:r.totalUsers,icon:e.jsx(k,{className:"text-indigo-500",size:28}),trend:"All-time accounts"}),e.jsx(L,{title:"Active Profiles (Last 48h)",value:x,icon:e.jsx(C,{className:"text-emerald-500",size:28}),trend:"Recently engaged"})]}),e.jsxs("div",{className:"bg-white/60 backdrop-blur-xl p-8 lg:p-10 rounded-[2.5rem] border border-white shadow-[0_8px_30px_rgb(0,0,0,0.04)] hover:shadow-[0_20px_60px_rgb(99,102,241,0.08)] transition-shadow duration-500",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-between md:items-end border-b border-white/50 pb-6 mb-8 gap-4",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-black text-slate-800 tracking-tight flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-50 rounded-xl text-indigo-600 border border-white shadow-sm",children:e.jsx(A,{size:24})}),"Lifetime Growth"]}),e.jsx("p",{className:"text-slate-500 font-medium mt-2",children:"Overall user registration history across the platform's lifespan."})]})}),e.jsxs("div",{className:"bg-slate-900/95 backdrop-blur-md p-6 md:p-8 rounded-[2.5rem] shadow-xl border border-slate-700 relative overflow-hidden h-[400px]",children:[e.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/10 rounded-full blur-[80px] pointer-events-none"}),e.jsx(oe,{data:m.lifetime,color:"#818cf8",dark:!0})]})]})]})},L=({title:n,value:l,icon:t,trend:i})=>e.jsxs("div",{className:"bg-white/60 backdrop-blur-xl p-8 rounded-[2.5rem] border border-white shadow-[0_4px_20px_rgb(0,0,0,0.03)] hover:shadow-[0_12px_40px_rgb(0,0,0,0.06)] hover:-translate-y-1 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"p-4 bg-white rounded-2xl shadow-sm border border-slate-50",children:t}),e.jsx("h4",{className:"text-sm font-black uppercase tracking-widest text-slate-400",children:n})]}),e.jsx("div",{className:"flex items-baseline gap-3",children:e.jsx("span",{className:"text-6xl font-black text-slate-800 tracking-tighter",children:l})}),e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),e.jsx("p",{className:"text-sm font-bold text-slate-500",children:i})]})]}),oe=({data:n,color:l,dark:t=!1})=>e.jsx("div",{className:"w-full h-full relative z-10 pt-2",children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(U,{data:n,margin:{top:10,right:10,left:-20,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:l,stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:l,stopOpacity:.2})]})}),e.jsx(R,{strokeDasharray:"3 3",vertical:!1,stroke:t?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)"}),e.jsx($,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:t?"#94a3b8":"#64748b",fontSize:12,fontWeight:600},dy:10}),e.jsx(M,{axisLine:!1,tickLine:!1,tick:{fill:t?"#64748b":"#94a3b8",fontSize:12},allowDecimals:!1}),e.jsx(T,{cursor:{fill:t?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)"},contentStyle:{borderRadius:"1rem",border:"none",backgroundColor:t?"rgba(15, 23, 42, 0.95)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(12px)",boxShadow:"0 10px 15px -3px rgba(0,0,0,0.1)",color:t?"#fff":"#0f172a"}}),e.jsx(F,{dataKey:"users",name:"Registrations",fill:"url(#colorUsers)",radius:[4,4,0,0],barSize:40})]})})}),ne=()=>{const[n,l]=d.useState(!0),[t,i]=d.useState([]),[x,c]=d.useState({total:0,active:0}),[r,m]=d.useState(""),[f,g]=d.useState("all");d.useEffect(()=>{(async()=>{try{const{data:o}=await u.get("/api/admin/users");o.success&&(i(o.users),c(o.stats))}catch(o){b.error("Failed to load user directory."),console.error(o)}finally{l(!1)}})()},[]);const j=async(s,o)=>{if(window.confirm(`Are you sure you want to permanently delete ${o}?`))try{const{data:h}=await u.delete(`/api/admin/users/${s}`);h.success&&(i(t.filter(y=>y.id!==s)),c(y=>({...y,total:y.total-1})),b.success(`${o} has been removed.`))}catch(h){b.error(h.response?.data?.message||"Failed to delete user.")}},w=t.filter(s=>{const o=`${s.firstName} ${s.lastName} ${s.email}`.toLowerCase().includes(r.toLowerCase());let h=!0;return f==="admin"&&(h=s.role==="admin"),f==="user"&&(h=s.role==="user"),f==="recent"&&(h=s.active===!0),o&&h}),a=[{id:"all",label:"All"},{id:"user",label:"Users"},{id:"admin",label:"Admins"},{id:"recent",label:"Recent (48h)"}],p=s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return n?e.jsx("div",{className:"h-[60vh] flex flex-col items-center justify-center animate-in fade-in duration-500",children:e.jsxs("div",{className:"bg-white/60 backdrop-blur-xl p-8 rounded-[2rem] border border-white shadow-sm flex flex-col items-center",children:[e.jsx(N,{className:"animate-spin text-indigo-500 mb-4",size:40}),e.jsx("p",{className:"text-slate-500 font-bold tracking-widest uppercase text-sm",children:"Loading User Directory"})]})}):e.jsxs("div",{className:"space-y-8 mt-4 md:mt-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"md:col-span-1 flex flex-col justify-center",children:[e.jsx("h2",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"User Directory"}),e.jsx("p",{className:"text-slate-500 font-medium mt-1 text-lg",children:"Manage platform access and accounts."})]}),e.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/60 backdrop-blur-xl p-6 rounded-[2rem] border border-white shadow-[0_4px_20px_rgb(0,0,0,0.03)] flex items-center gap-5",children:[e.jsx("div",{className:"p-4 bg-indigo-50 rounded-2xl text-indigo-600 border border-white shadow-inner",children:e.jsx(k,{size:28})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-400",children:"Total Users"}),e.jsx("h3",{className:"text-4xl font-black text-slate-800 tracking-tighter",children:x.total.toLocaleString()})]})]}),e.jsxs("div",{className:"bg-white/60 backdrop-blur-xl p-6 rounded-[2rem] border border-white shadow-[0_4px_20px_rgb(0,0,0,0.03)] flex items-center gap-5",children:[e.jsx("div",{className:"p-4 bg-emerald-50 rounded-2xl text-emerald-500 border border-white shadow-inner",children:e.jsx(C,{size:28})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-400",children:"Active Profiles (Last 48h)"}),e.jsx("h3",{className:"text-4xl font-black text-slate-800 tracking-tighter",children:x.active.toLocaleString()})]})]})]})]}),e.jsxs("div",{className:"bg-white/60 backdrop-blur-xl p-6 md:p-10 rounded-[2.5rem] border border-white shadow-[0_8px_30px_rgb(0,0,0,0.04)] relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/10 rounded-full blur-[80px] pointer-events-none"}),e.jsxs("div",{className:"relative z-10 flex flex-col xl:flex-row justify-between items-start xl:items-center gap-4 mb-8 pb-6 border-b border-white/50",children:[e.jsx("h3",{className:"text-2xl font-black text-slate-800 tracking-tight shrink-0",children:"Accounts"}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row items-center gap-3 w-full xl:w-auto",children:[e.jsx("div",{className:"flex items-center gap-2 w-full sm:w-auto overflow-x-auto pb-2 sm:pb-0 hide-scrollbar",children:e.jsx("div",{className:"flex bg-white/50 p-1 rounded-2xl border border-white shadow-sm shrink-0",children:a.map(s=>e.jsx("button",{onClick:()=>g(s.id),className:`px-4 py-2 rounded-xl font-bold text-sm whitespace-nowrap transition-all duration-300 ${f===s.id?"bg-indigo-500 text-white shadow-md shadow-indigo-500/20":"text-slate-500 hover:text-slate-800 hover:bg-white/80"}`,children:s.label},s.id))})}),e.jsxs("div",{className:"relative w-full sm:w-auto shrink-0",children:[e.jsx(z,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search name or email...",value:r,onChange:s=>m(s.target.value),className:"w-full sm:w-72 pl-12 pr-4 py-3 bg-white/80 border border-white shadow-sm rounded-2xl focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all font-semibold text-slate-800 placeholder:text-slate-400"})]})]})]}),e.jsx("div",{className:"relative z-10 space-y-4",children:w.length===0?e.jsxs("div",{className:"text-center py-16 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"bg-slate-100 p-4 rounded-full mb-4",children:e.jsx(z,{className:"text-slate-400",size:32})}),e.jsx("h4",{className:"text-xl font-bold text-slate-700 mb-1",children:"No users found"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Try adjusting your search or filter settings."})]}):w.map(s=>e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between p-5 bg-white/80 backdrop-blur-md rounded-[1.5rem] border border-white shadow-sm hover:shadow-md transition-all duration-300 gap-4 md:gap-0 group",children:[e.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[e.jsxs("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center font-black text-xl border border-white shadow-inner shrink-0 ${s.role==="admin"?"bg-gradient-to-br from-indigo-500 to-violet-500 text-white":"bg-slate-100 text-slate-600"}`,children:[s.firstName.charAt(0),s.lastName.charAt(0)]}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("h4",{className:"font-bold text-slate-900 text-lg flex items-center gap-2 truncate",children:[s.firstName," ",s.lastName,s.active&&s.role!=="admin"&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 shrink-0",title:"Active in last 48 hours"}),s.role==="admin"&&e.jsx(ie,{size:14,className:"text-indigo-500 shrink-0"})]}),e.jsxs("p",{className:"text-sm font-medium text-slate-500 flex items-center gap-1.5 mt-0.5 truncate",children:[e.jsx(O,{size:12,className:"opacity-70 shrink-0"})," ",e.jsx("span",{className:"truncate",children:s.email})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-6 md:gap-8 pt-4 md:pt-0 border-t md:border-0 border-slate-100 mt-2 md:mt-0 shrink-0",children:[e.jsxs("div",{className:"flex flex-col md:items-end",children:[e.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-400 mb-1 hidden md:block",children:"Joined"}),e.jsxs("p",{className:"text-sm font-bold text-slate-700 flex items-center gap-1.5",children:[e.jsx(Z,{size:14,className:"text-slate-400 md:hidden"}),p(s.joined)]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`px-4 py-1.5 rounded-full text-xs font-bold border ${s.role==="admin"?"bg-indigo-50/50 text-indigo-700 border-indigo-200":"bg-slate-50 border-slate-200 text-slate-600"}`,children:s.role.toUpperCase()}),e.jsx("button",{onClick:()=>j(s.id,`${s.firstName} ${s.lastName}`),disabled:s.role==="admin",className:"p-3 text-slate-400 bg-white border border-white shadow-sm hover:text-rose-500 hover:bg-rose-50 hover:border-rose-100 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:s.role==="admin"?"Cannot delete admin":"Delete User",children:e.jsx(H,{size:18})})]})]})]},s.id))})]})]})},ce=()=>{const[n,l]=d.useState(!0),[t,i]=d.useState(null);if(d.useEffect(()=>{(async()=>{try{const m=await u.get("/api/admin/graphs");m.data.success&&i(m.data)}catch(m){b.error("Failed to load graph data."),console.error(m)}finally{l(!1)}})()},[]),n||!t)return e.jsx("div",{className:"h-[60vh] flex flex-col items-center justify-center animate-in fade-in duration-500",children:e.jsxs("div",{className:"bg-white/60 backdrop-blur-xl p-8 rounded-[2rem] border border-white shadow-sm flex flex-col items-center",children:[e.jsx(N,{className:"animate-spin text-indigo-500 mb-4",size:40}),e.jsx("p",{className:"text-slate-500 font-bold tracking-widest uppercase text-sm",children:"Loading Analytics"})]})});const{totalUsers:x,graphs:c}=t;return e.jsxs("div",{className:"space-y-8 mt-4 md:mt-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-12",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-end gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Registration Analytics"}),e.jsx("p",{className:"text-slate-500 font-medium mt-1 text-lg",children:"Monitor platform growth and user acquisition trends."})]}),e.jsxs("div",{className:"bg-white/60 backdrop-blur-xl p-5 rounded-2xl border border-white shadow-sm flex items-center gap-5",children:[e.jsx("div",{className:"p-3 bg-indigo-50 rounded-xl text-indigo-600 border border-white shadow-inner",children:e.jsx(k,{size:24})}),e.jsxs("div",{className:"pr-4",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Total Users"}),e.jsx("h3",{className:"text-3xl font-black text-slate-800 tracking-tighter",children:x.toLocaleString()})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white/60 backdrop-blur-xl p-8 rounded-[2.5rem] border border-white shadow-[0_4px_20px_rgb(0,0,0,0.03)] hover:shadow-[0_8px_30px_rgb(99,102,241,0.06)] transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-white/50 pb-4",children:[e.jsx(X,{className:"text-indigo-500",size:22}),e.jsx("h3",{className:"text-xl font-black text-slate-800 tracking-tight",children:"Past 7 Days"})]}),e.jsx(_,{data:c.sevenDays,color:"#6366f1",gradientId:"color7Days"})]}),e.jsxs("div",{className:"bg-white/60 backdrop-blur-xl p-8 rounded-[2.5rem] border border-white shadow-[0_4px_20px_rgb(0,0,0,0.03)] hover:shadow-[0_8px_30px_rgb(99,102,241,0.06)] transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-white/50 pb-4",children:[e.jsx(I,{className:"text-violet-500",size:22}),e.jsx("h3",{className:"text-xl font-black text-slate-800 tracking-tight",children:"Past 30 Days"})]}),e.jsx(_,{data:c.thirtyDays,color:"#8b5cf6",gradientId:"color30Days"})]})]}),e.jsxs("div",{className:"bg-slate-900/95 backdrop-blur-md p-8 lg:p-10 rounded-[2.5rem] shadow-xl border border-slate-700 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/10 rounded-full blur-[80px] pointer-events-none"}),e.jsx("div",{className:"relative z-10 flex items-center justify-between mb-8 border-b border-slate-700/50 pb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-xl text-indigo-400 border border-slate-700",children:e.jsx(A,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-white tracking-tight",children:"Lifetime Registrations"}),e.jsx("p",{className:"text-slate-400 font-medium mt-1 text-sm",children:"Aggregated by month"})]})]})}),e.jsx("div",{className:"h-[350px]",children:e.jsx(_,{data:c.lifetime,color:"#a78bfa",gradientId:"colorLifetime",dark:!0})})]})]})},_=({data:n,color:l,gradientId:t,dark:i=!1})=>e.jsx("div",{className:"w-full h-64 relative z-10 pt-2",children:e.jsx(D,{width:"100%",height:"100%",children:e.jsxs(U,{data:n,margin:{top:10,right:10,left:-20,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:t,x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:l,stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:l,stopOpacity:.2})]})}),e.jsx(R,{strokeDasharray:"3 3",vertical:!1,stroke:i?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)"}),e.jsx($,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:i?"#94a3b8":"#64748b",fontSize:12,fontWeight:600},dy:10}),e.jsx(M,{axisLine:!1,tickLine:!1,tick:{fill:i?"#64748b":"#94a3b8",fontSize:12},allowDecimals:!1}),e.jsx(T,{cursor:{fill:i?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)"},contentStyle:{borderRadius:"1rem",border:"none",backgroundColor:i?"rgba(15, 23, 42, 0.95)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(12px)",boxShadow:"0 10px 15px -3px rgba(0,0,0,0.1)",fontWeight:"bold",color:i?"#fff":"#0f172a"},itemStyle:{fontWeight:"800",color:l}}),e.jsx(F,{dataKey:"users",name:"Registrations",fill:`url(#${t})`,radius:[4,4,0,0],barSize:window.innerWidth>768?32:16})]})})}),xe=()=>{const[n,l]=d.useState([]),[t,i]=d.useState(!0),[x,c]=d.useState({}),[r,m]=d.useState({}),[f,g]=d.useState(null);d.useEffect(()=>{j()},[]);const j=async()=>{try{const{data:a}=await u.get("/api/admin/support");if(a.success){const p=a.tickets||[];l(p);const s={};p.forEach(o=>{o.adminReply&&(s[o._id]=o.adminReply)}),c(s)}}catch{b.error("Failed to load support queries.")}finally{i(!1)}},w=async a=>{const p=x[a];if(!p||!p.trim())return b.error("Reply cannot be empty.");g(a);try{const{data:s}=await u.put(`/api/admin/support/${a}`,{reply:p});s.success&&(b.success("Reply saved successfully!"),m(o=>({...o,[a]:!1})),l(o=>o.map(h=>h._id===a?s.ticket:h)))}catch{b.error("Failed to submit reply.")}finally{g(null)}};return t?e.jsxs("div",{className:"h-[60vh] flex flex-col items-center justify-center animate-in fade-in",children:[e.jsx(N,{className:"animate-spin text-indigo-500 mb-4",size:40}),e.jsx("p",{className:"text-slate-500 font-bold tracking-widest uppercase text-sm",children:"Loading Inbox"})]}):e.jsxs("div",{className:"space-y-8 mt-4 md:mt-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-12 max-w-5xl mx-auto",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-black text-slate-900 tracking-tight flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-indigo-50 rounded-xl text-indigo-600 border border-white shadow-sm",children:e.jsx(G,{size:24})}),"Support Inbox"]}),e.jsx("p",{className:"text-slate-500 font-medium mt-2 text-lg",children:"Manage and respond to user queries."})]}),e.jsx("div",{className:"space-y-6",children:n.length===0?e.jsx("div",{className:"bg-white/60 p-12 rounded-[2rem] text-center border border-white shadow-sm",children:e.jsx("p",{className:"text-slate-500 font-bold text-lg",children:"Inbox is empty. All caught up! ðŸŽ‰"})}):n.map(a=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-xl p-6 md:p-8 rounded-[2rem] border border-white shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center border-b border-slate-100 pb-4 mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-slate-100 p-2.5 rounded-xl text-slate-500",children:e.jsx(W,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-900",children:a.user?.fullName?.firstName||a.user?.fullName||"Anonymous User"}),e.jsx("p",{className:"text-xs font-medium text-slate-500",children:a.user?.email||"No email provided"})]})]}),a.status==="pending"?e.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 bg-amber-50 text-amber-600 font-bold text-[10px] uppercase tracking-wider rounded-full border border-amber-100",children:[e.jsx(Y,{size:12})," Pending"]}):e.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 bg-emerald-50 text-emerald-600 font-bold text-[10px] uppercase tracking-wider rounded-full border border-emerald-100",children:[e.jsx(V,{size:12})," Replied"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2",children:"User's Message"}),e.jsx("p",{className:"text-slate-800 font-medium bg-slate-50 p-5 rounded-[1.5rem] border border-slate-100",children:a.message})]}),e.jsxs("div",{className:"bg-indigo-50/50 p-6 rounded-[1.5rem] border border-indigo-50",children:[e.jsxs("div",{className:"flex justify-between items-end mb-3",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-400",children:"Your Response"}),a.status==="replied"&&e.jsx("button",{onClick:()=>m({...r,[a._id]:!r[a._id]}),className:"text-indigo-600 hover:text-indigo-800 flex items-center gap-1.5 text-xs font-bold bg-white px-3 py-1.5 rounded-lg shadow-sm border border-indigo-100 transition-colors",children:r[a._id]?e.jsxs(e.Fragment,{children:[e.jsx(E,{size:14})," Cancel"]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{size:14})," Edit Reply"]})})]}),a.status==="pending"||r[a._id]?e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:x[a._id]||"",onChange:p=>c({...x,[a._id]:p.target.value}),placeholder:"Type your response here...",className:"w-full bg-white p-4 pr-16 rounded-[1rem] border border-indigo-100 shadow-inner focus:outline-none focus:ring-2 focus:ring-indigo-500/50 min-h-[120px] font-medium text-slate-700"}),e.jsx("button",{disabled:f===a._id,onClick:()=>w(a._id),className:"absolute bottom-3 right-3 bg-indigo-500 hover:bg-indigo-600 text-white p-3 rounded-xl shadow-md transition-all active:scale-95 disabled:opacity-50",children:f===a._id?e.jsx(N,{size:20,className:"animate-spin"}):e.jsx(J,{size:20})})]}):e.jsx("p",{className:"text-indigo-950 font-medium whitespace-pre-wrap bg-white p-4 rounded-[1rem] border border-indigo-100 shadow-sm min-h-[60px]",children:a.adminReply})]})]},a._id))})]})},ue=()=>{const{logout:n}=P(),l=q(),[t,i]=d.useState("overview"),x=async()=>{await n(),b.success("Admin logged out successfully"),l("/login")},c=[{id:"overview",label:"Overview",icon:B},{id:"users",label:"Users",icon:k},{id:"graphs",label:"Registrations",icon:I},{id:"support",label:"Support",icon:G}];return e.jsxs("div",{className:"flex h-screen bg-slate-50 font-sans text-slate-800 overflow-hidden selection:bg-indigo-200 relative",children:[e.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40rem] h-[40rem] bg-indigo-400/20 rounded-full blur-[120px] pointer-events-none"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[30rem] h-[30rem] bg-emerald-400/10 rounded-full blur-[120px] pointer-events-none"}),e.jsxs("aside",{className:"hidden md:flex w-72 flex-col bg-slate-900/95 backdrop-blur-2xl text-slate-300 p-6 shadow-[4px_0_24px_rgba(0,0,0,0.05)] border-r border-slate-800 z-20 transition-all relative",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-12 px-2 group cursor-pointer",children:[e.jsx("img",{src:"/logo.png",alt:"NutriGen Logo",className:"h-10 w-auto transition-transform group-hover:scale-110 duration-300"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-black tracking-tight text-white bg-gradient-to-r from-white to-slate-300 bg-clip-text",children:"NutriGen"}),e.jsx("span",{className:"text-[10px] font-black tracking-widest uppercase text-indigo-400",children:"Admin Portal"})]})]}),e.jsx("nav",{className:"flex-1 space-y-2",children:c.map(r=>e.jsx(me,{icon:e.jsx(r.icon,{size:22,strokeWidth:2.5}),label:r.label,isActive:t===r.id,onClick:()=>i(r.id)},r.id))}),e.jsxs("div",{className:"pt-6 border-t border-slate-800/50 flex flex-col gap-2",children:[e.jsx(K,{}),e.jsxs("button",{onClick:x,className:"w-full flex items-center gap-3 text-slate-400 hover:text-rose-400 transition-all p-4 rounded-2xl hover:bg-rose-500/10 font-bold group",children:[e.jsx(S,{size:22,className:"group-hover:-translate-x-1 transition-transform",strokeWidth:2.5}),"Logout"]})]})]}),e.jsxs("div",{className:"flex flex-col flex-1 w-full h-full relative z-10",children:[e.jsxs("header",{className:"md:hidden flex items-center justify-between bg-white/80 backdrop-blur-xl px-6 py-4 border-b border-white/50 shadow-sm z-20 relative",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/logo.png",alt:"NutriGen Logo",className:"h-8 w-auto"}),e.jsx("h1",{className:"text-xl font-black tracking-tight text-slate-900",children:"Admin"})]}),e.jsx("button",{onClick:x,className:"p-2 text-slate-400 hover:text-rose-500 bg-white/50 border border-white rounded-full transition-all shadow-sm",children:e.jsx(S,{size:20,strokeWidth:2.5})})]}),e.jsx("main",{className:"flex-1 overflow-y-auto w-full p-4 md:p-8 pb-32 md:pb-8 scroll-smooth",children:e.jsxs("div",{className:"max-w-6xl mx-auto h-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:[t==="overview"&&e.jsx(de,{}),t==="users"&&e.jsx(ne,{}),t==="graphs"&&e.jsx(ce,{}),t==="support"&&e.jsx(xe,{})]})}),e.jsx("nav",{className:"md:hidden fixed bottom-6 left-4 right-4 bg-white/90 backdrop-blur-2xl border border-white/50 shadow-[0_20px_60px_rgba(0,0,0,0.12)] z-50 px-2 pb-safe pt-2 rounded-3xl",children:e.jsx("div",{className:"flex justify-around items-center h-16",children:c.map(r=>e.jsxs("button",{onClick:()=>i(r.id),className:`flex flex-col items-center justify-center w-16 h-full space-y-1 transition-all duration-300 ${t===r.id?"text-indigo-600 scale-105":"text-slate-400 hover:text-slate-600"}`,children:[e.jsx("div",{className:`${t===r.id?"bg-indigo-50 shadow-inner border border-indigo-100/50 p-1.5 rounded-xl":""}`,children:e.jsx(r.icon,{size:22,strokeWidth:t===r.id?2.5:2})}),e.jsx("span",{className:"text-[10px] font-bold tracking-wide",children:r.label})]},r.id))})})]})]})},me=({icon:n,label:l,isActive:t,onClick:i})=>e.jsxs("button",{onClick:i,className:`w-full flex items-center gap-4 py-4 px-5 rounded-2xl transition-all duration-300 font-bold group ${t?"bg-gradient-to-r from-indigo-500 to-indigo-400 text-white shadow-[0_0_20px_rgba(99,102,241,0.3)] translate-x-2":"text-slate-400 hover:bg-slate-800/50 hover:text-slate-200"}`,children:[e.jsx("div",{className:`${t?"text-white":"text-slate-400 group-hover:text-indigo-400 transition-colors"}`,children:n}),l]});export{ue as default};
